# San Francisco Rush 2049 (N64) - US Version
# Splat configuration for ROM extraction and decompilation

name: San Francisco Rush 2049 (US)
sha1: 3f99351d7bb61656614bdb2aa1a90cfe55d1922c

options:
  basename: rush2049
  target_path: baserom.us.z64
  elf_path: build/us/rush2049.us.elf
  base_path: .
  platform: n64
  compiler: IDO  # Likely IDO 5.3 or 7.1

  # Output paths
  asm_path: asm/us
  src_path: src
  build_path: build/us
  asset_path: assets/us
  cache_path: .splat_cache

  # Build settings
  create_asm_dependencies: True
  ld_script_path: rush2049.us.ld
  ld_dependencies: True

  # Analysis settings
  find_file_boundaries: True
  header_encoding: ASCII

  # Compiler/assembler settings
  o_as_suffix: True
  use_legacy_include_asm: False
  mips_abi_float_regs: o32

  section_order: [".text", ".data", ".rodata", ".bss"]
  auto_link_sections: [".data", ".rodata", ".bss"]

  # Symbol files
  symbol_addrs_path:
    - symbol_addrs.us.txt
  reloc_addrs_path:
    - reloc_addrs.us.txt

  undefined_funcs_auto_path: undefined_funcs_auto.us.txt
  undefined_syms_auto_path: undefined_syms_auto.us.txt

  # Extensions
  extensions_path: tools/splat_ext

  # String detection
  string_encoding: ASCII
  data_string_encoding: ASCII
  rodata_string_guesser_level: 2
  data_string_guesser_level: 2

  # N64 SDK symbols
  libultra_symbols: True
  hardware_regs: True

  # Graphics microcode (Rush 2049 likely uses F3DEX2)
  gfx_ucode: f3dex2

segments:
  # N64 ROM Header (0x00 - 0x40)
  - name: header
    type: header
    start: 0x0

  # IPL3 Boot code (0x40 - 0x1000)
  - name: ipl3
    type: bin
    start: 0x40

  # Entry point / boot code
  - name: entry
    type: code
    start: 0x1000
    vram: 0x80000400
    subsegments:
      - [0x1000, hasm]

  # Main code segment - split based on splat's file boundary detection
  - name: main
    type: code
    start: 0x1050
    vram: 0x80000450
    follows_vram: entry
    subsegments:
      - [0x1050, asm]
      - [0x21F0, asm]
      - [0x2CF0, asm]
      - [0x3140, asm]
      - [0x3330, asm]
      - [0x3390, asm]
      - [0x34A0, asm]
      - [0x55F0, asm]
      - [0x5610, asm]
      - [0x7600, asm]
      - [0x7630, asm]
      - [0x7940, asm]
      - [0x79A0, asm]
      - [0x7A10, asm]
      - [0x7AD0, asm]
      - [0x7B30, asm]
      - [0x7C80, asm]
      - [0x7FB0, asm]
      - [0x8040, asm]
      - [0x81E0, asm]
      - [0x8330, asm]
      - [0x83D0, asm]
      - [0x8410, asm]
      - [0x8440, asm]
      - [0x8700, asm]
      - [0x8800, asm]
      - [0x88A0, asm]
      - [0x8920, asm]
      - [0x8A80, asm]
      - [0x8DD0, asm]
      - [0x8E10, asm]
      - [0x90E0, asm]
      - [0x9190, asm]
      - [0x9230, asm]
      - [0x92F0, asm]
      - [0x9330, asm]
      - [0x9660, asm]
      - [0x9820, asm]
      - [0x9AB0, asm]
      - [0x9DE0, asm]
      - [0xA050, asm]
      - [0xA330, asm]
      - [0xA5B0, asm]
      - [0xA5F0, asm]
      - [0xA800, asm]
      - [0xA810, asm]
      - [0xAB20, asm]
      - [0xAF50, asm]
      - [0xB120, asm]
      - [0xB300, asm]
      - [0xB570, asm]
      - [0xB9F0, asm]
      - [0xBE40, asm]
      - [0xBFE0, asm]
      - [0xC990, asm]
      - [0xCA70, asm]
      - [0xCC50, asm]
      - [0xD0B0, asm]
      - [0xD140, asm]
      - [0xD260, asm]
      - [0xD270, asm]
      - [0xD570, asm]
      - [0xD580, asm]
      - [0xDEB0, asm]
      - [0xE1C0, asm]
      - [0xE240, asm]
      - [0xE250, asm]
      - [0xE280, asm]
      - [0xE310, asm]
      - [0xE340, asm]
      - [0xE370, asm]
      - [0xE390, asm]
      - [0xE3F0, asm]
      - [0xE440, asm]
      - [0xE490, asm]
      - [0xE4F0, asm]
      - [0xE7C0, asm]
      - [0xE8D0, asm]
      - [0xE9A0, asm]
      - [0xEFC0, asm]
      - [0xEFD0, asm]
      - [0xF0B0, asm]
      - [0xF160, asm]
      - [0xF450, asm]
      - [0xF4D0, asm]
      - [0xF700, asm]

  # Remaining ROM data (to be further segmented)
  - type: bin
    start: 0x10000
    name: data

  # End of ROM
  - [0xC00000]
